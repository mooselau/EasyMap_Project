{% extends 'easymap/base.html' %}
{% load staticfiles %} 

<html>
<head>
	{% block head_block %}
    <script src="{% static "js/jquery-1.11.3.min.js" %}"></script>
	<script type="text/javascript">

	// This is used to check if there is any map-need askings.
	window.onload = function() {
		
		data = document.getElementById("geometry").getAttribute("data-info");
// // !!! NEEDS VERIFYING !!!!
			if (data != "None"){
				// alert("entering GMap..");
				initialize();
				splitDataString();
			}
			else {
				// alert("No GMap!");
			}
	}
	
// 	$(document).ready(function () {
// 			// if (data !== null && data !== None)
// 				// new Messi('You Have locations to show!', {title: 'Title', titleClass: 'success', buttons: [{id: 0, label: 'GO!', val: 'X'}]});
// 				// alert(data);
// 				splitDataString();
// 			}
// 	})
	</script>

	{% endblock %}

</head>
	
<body>
	{% block nav_block %}
		<ul class="nav navbar-nav navbar-right">
			<li><a>Share</a></li>
			<li><a>About</a></li>
		</ul> 
			<!-- <li></li> -->
<!-- 	{% if categories %}
		{% for category in categories %}
        <li><a href="/easymap/category/{{ category.id_name }}" target="_blank">{{ category.id_name }}</a></li>
    	{% endfor %}
    {% else %}
		<li><a href="#">{{ boldmessage }}</a></li>
	{% endif %}  -->
	<!-- This DIV is set for temporarily storing data passed from Database -->
    	<div id="geometry" data-info="{{ locations_list }}"></div>
	{% endblock %}

	{% block map_block %}

			<div class="left-menu collapse-group">
			<ul class="menu-ul">
			<li><div id="search-box-container">
				<div id="gradient"></div>
				<form class="searchbox" action="/easymap/querysearch" method="POST"> {% csrf_token %}
					<!-- var bla = $('#txt_name').val(); -->
				        <input id="search-input" type="search" name="search-content" placeholder="Search Here.." />
				        <button class="main-search-btn" type="submit" value="search">&nbsp;</button>
				</form>
				</div>
			</li>
			<li><a id="all-btn" class="btn btn-info menu-btn">All in library</a></li>
			<div class="whats-btn">
				<li><a id="whats-new-btn" class="btn btn-info menu-btn-whats" href="/easymap/news/">What's New!</a></li>
				<li><a id="whats-hot-btn" class="btn btn-info menu-btn-whats" href="/easymap/popular/">What's Hot!</a></li>
			</div>
			</ul>

			<div class="extra-tool">
				<div class="btn-group">
				  <a href="#" class="btn btn-info test-btn"><img id="map-pic" src="{% static "images/map.png" %}" alt="Picture of Map" /></a>
				  <a aria-expanded="false" href="#" class="btn btn-info dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></a>
				  <ul class="dropdown-menu">
				    <li><a href="#">Action</a></li>
				    <li><a href="#">Another action</a></li>
				    <li><a href="#">Something else here</a></li>
				    <li class="divider"></li>
				    <li><a href="#">Separated link</a></li>
				  </ul>
				</div>
<!-- 				<div class="form-group input-box">
				  <label class="control-label" for="inputSmall">Where is here</label>
				  <input class="form-control input-sm" id="inputSmall" type="text" placeholder="Type Here.." value="">
				  <button type="submit" id="show-map" class="btn btn-sm search-btn btn-primary" href="/easymap/home">GO!</button>
				</div> -->
					 <!-- onclick="alert('HEHE #: '+$('#geometry').data('info'));" -->
			</div>
				<!-- <a class="btn btn-info" href="/easymap/home">Show Map</a> -->
			<a id="setting-btn" class="btn btn-warning" href=""><img id="setting-pic" src="{% static "images/settings.png" %}" alt="Picture of Setting" /></a>

			</div>
		

<!-- 			
	        	<ul class="collapse"> -->
	        		<!-- onclick="javascript:Query('{{ category.id_name }}')" -->
<!-- 		        {% if categories %}
					{% for category in categories %}
		        		<li><a class="btn btn-success">{{ category.id_name }}</a></li>
		    		{% endfor %}
		    	{% else %}
						<li class="menu-li" class='last'><a href="#">{{ boldmessage }}</a></li>
				{% endif %}
	       		</ul>
	       	</li> -->
	       
<!-- 		   <li class='has-sub'><a href='#'><span>About</span></a>
		      <ul>
		         <li><a href='#'><span>Company</span></a></li>
		         <li class='last'><a href='#'><span>Contact</span></a></li>
		      </ul>
		   </li>
		   <li class='last'><a href='#'><span>Contact</span></a></li>
			</ul> -->

		<!-- if there is queries then show the map, otherwise no. -->
		{% if locations_list != None %}
			<div id="map-canvas">


		{% else %}
			<div id="alter">
				<div id="chart-container" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto">
				</div>
				<!-- {{ news }} -->
		{% endif %}

		</div>		

	{% endblock %}

	{% block footer_block%}
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTofEnEhM2-22QnSfDx0e3cfejTxokRHo&v=3.exp"></script> 
	<script src="{% static "js/googlemaps.js" %}"></script>

	<script src="http://code.highcharts.com/highcharts.js"></script>
	<!-- // <script src="http://code.highcharts.com/modules/exporting.js"></script> -->
	<script src="{% static "js/charts-script.js" %}"></script>
    {% endblock %}
</body>

</html>